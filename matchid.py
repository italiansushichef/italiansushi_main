import urllib2, json, sys, osfrom riotwatcher import RiotWatcherfrom datetime import datetime, timedeltatoday = datetime.now()twoweeks = timedelta(days=14)if len(sys.argv) != 3:    print "usage: python matchid.py [max_matches] [API_KEY]"    sys.exit(0)max_matches = int(sys.argv[1])d = []API_KEY = sys.argv[2]w = RiotWatcher(API_KEY)f = []sumfile = 'static/json-data/summonerids.json'with open(sumfile, 'r') as readfile:    sumdata = json.load(readfile)    summid = sumdata['summonerids']i = 0j = 1if w.can_make_request() == True:    #urlone = 'https://na.api.pvp.net/api/lol/na/v2.2/matchhistory/' + str(summid[i]) +  '?rankedQueues=RANKED_SOLO_5x5&api_key=' + API_KEY    readsummfile = urllib2.urlopen('https://na.api.pvp.net/api/lol/na/v2.2/matchhistory/' + str(summid[i]) +  '?rankedQueues=RANKED_SOLO_5x5&api_key=' + API_KEY)    data = json.load(readsummfile)    for match in data["matches"]:        past = datetime.fromtimestamp(match["matchCreation"] / 1000)        recentgamedata = today - past        matches = {"recentmatchId":"", "champs":[]}        if recentgamedata <= twoweeks:            matches["recentmatchId"] = match["matchId"]            f.append(match["matchId"])            urltwo = 'https://na.api.pvp.net/api/lol/na/v2.2/match/' + str(matches["recentmatchId"]) + '?api_key=' + API_KEY            #print urltwo            readmatchfile = urllib2.urlopen('https://na.api.pvp.net/api/lol/na/v2.2/match/' + str(matches["recentmatchId"]) + '?api_key=' + API_KEY)            matchdata = json.load(readmatchfile)                            for players in matchdata["participants"]:                champion = {}                champion["id"] = players["championId"]                champion["position"] = players["timeline"]["lane"]                matches["champs"].append(champion)                                   d.append(matches)i += 1j += 1while (len(d) / 10) < max_matches and j < 200:    if w.can_make_request() == True:        readsummfile = urllib2.urlopen('https://na.api.pvp.net/api/lol/na/v2.2/matchhistory/' + str(summid[i]) +  '?rankedQueues=RANKED_SOLO_5x5&api_key=' + API_KEY)        data = json.load(readsummfile)        for match in data["matches"]:            past = datetime.fromtimestamp(match["matchCreation"] / 1000)            recentgamedata = today - past            matches = {"recentmatchId":"","champs":[]}            if j < 200 and match["matchId"] not in f:                if recentgamedata <= twoweeks:                    matches["recentmatchId"] = match["matchId"]                    f.append(match["matchId"])                    readmatchfile = urllib2.urlopen('https://na.api.pvp.net/api/lol/na/v2.2/match/' + str(matches["recentmatchId"]) + '?api_key=' + API_KEY)                    matchdata = json.load(readmatchfile)                                    for players in matchdata["participants"]:                        champion = {}                        champion["id"] = players["championId"]                        champion["position"] = players["timeline"]["lane"]                        matches["champs"].append(champion)                                           d.append(matches)        i += 1        j += 1filepath = 'static/json-data/matchids.json'output={'match_count':max_matches * 10, 'matches':d[:max_matches * 10]}if os.path.isfile(filepath):    with open(filepath, 'r') as readfile:        filedata = json.load(readfile)        if filedata and filedata['match_count'] and filedata['matches']:            for mid in filedata['matches']:                if mid["recentmatchId"] not in output['matches']:                    output['matches'].append(mid)                with open(filepath, 'w') as outfile:    json.dump(output, outfile, indent = 4)    print output['match_count']print "done"            